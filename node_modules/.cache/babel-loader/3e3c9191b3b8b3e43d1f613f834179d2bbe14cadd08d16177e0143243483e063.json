{"ast":null,"code":"var _jsxFileName = \"/Users/ois/Documents/oisCoder/ReactBurgerTs/src/pages/ForgotPasswordPage.tsx\",\n  _s = $RefreshSig$();\nimport { Input, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport './styles.css';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch } from 'react-redux';\nimport { forgotPassword } from \"../services/isLogin\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ForgotPassword(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text text_type_main-medium\",\n      children: \"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      noValidate: true,\n      onSubmit: e => {\n        e.preventDefault();\n        props.submit();\n      },\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        type: 'email',\n        placeholder: 'Email',\n        onChange: props.setEmail //e => setEmail(e.target.value)\n        ,\n        value: props.email,\n        name: 'email',\n        error: props.validEmail //validEmail ? false : true\n        ,\n        errorText: props.errorEmail,\n        size: 'default',\n        extraClass: \"ml-1 mt-8 mb-8\",\n        ref: props.emailRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"submitButton\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          htmlType: \"submit\",\n          type: \"primary\",\n          size: \"medium\",\n          children: \"\\u0412\\u043E\\u0441\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"options\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"subForLink text text_type_main-small\",\n        children: \"\\u0412\\u0441\\u043F\\u043E\\u043C\\u043D\\u0438\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/login\",\n        className: \"link text text_type_main-small\",\n        onClick: props.statusLogIn,\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 9\n  }, this);\n}\n_c = ForgotPassword;\nfunction ForgotPasswordPage() {\n  _s();\n  const [email, setEmail] = useState('');\n  const [validEmail, setValidEmail] = useState(true);\n  const emailRef = useRef(null);\n  const [errorEmail, setErrorEmail] = useState('');\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (emailRef.current && emailRef.current.validity.valid) {\n      setValidEmail(true);\n      setErrorEmail('');\n    } else {\n      setValidEmail(false);\n      setErrorEmail('Неверный формат электронной почты');\n    }\n  }, [email]);\n  const handleSubmit = async () => {\n    const bodyData = {\n      email: email.toLowerCase()\n    };\n    try {\n      await dispatch(forgotPassword(bodyData)).unwrap();\n      navigate('/password-reset/reset');\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(ForgotPassword, {\n    setEmail: e => setEmail(e.target.value),\n    email: email,\n    validEmail: validEmail ? false : true,\n    errorEmail: errorEmail,\n    emailRef: emailRef,\n    statusLogIn: () => navigate(\"/login\"),\n    submit: () => handleSubmit()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n}\n_s(ForgotPasswordPage, \"sw1Q0Ih5y6ehXHda6gGqfqa2maE=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n_c2 = ForgotPasswordPage;\nexport default ForgotPasswordPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"ForgotPassword\");\n$RefreshReg$(_c2, \"ForgotPasswordPage\");","map":{"version":3,"names":["Input","Button","React","useState","useEffect","useRef","Link","useNavigate","useDispatch","forgotPassword","jsxDEV","_jsxDEV","ForgotPassword","props","className","children","fileName","_jsxFileName","lineNumber","columnNumber","noValidate","onSubmit","e","preventDefault","submit","type","placeholder","onChange","setEmail","value","email","name","error","validEmail","errorText","errorEmail","size","extraClass","ref","emailRef","htmlType","to","onClick","statusLogIn","_c","ForgotPasswordPage","_s","setValidEmail","setErrorEmail","navigate","dispatch","current","validity","valid","handleSubmit","bodyData","toLowerCase","unwrap","console","target","_c2","$RefreshReg$"],"sources":["/Users/ois/Documents/oisCoder/ReactBurgerTs/src/pages/ForgotPasswordPage.tsx"],"sourcesContent":["import { Input, Button } from \"@ya.praktikum/react-developer-burger-ui-components\"\nimport React, { useState, useEffect, useRef } from 'react';\nimport './styles.css'\nimport { Link, useNavigate} from \"react-router-dom\";\nimport {  useDispatch } from 'react-redux';\nimport { forgotPassword } from \"../services/isLogin\";\nimport { AppDispatch } from \"..\";\n\ntype ForgotPasswordProps = {\n    setEmail: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    email: string;\n    validEmail: boolean;\n    errorEmail: string;\n    emailRef: React.Ref<HTMLInputElement>;\n    statusLogIn: () => void;\n    submit: () => Promise<void>;\n  };\n\nfunction ForgotPassword(props: ForgotPasswordProps) {\n\n\n    return (\n        <div className=\"main\">\n            <h1 className=\"text text_type_main-medium\">Восстановление пароля</h1>\n            <form noValidate onSubmit={(e) => {\n                    e.preventDefault();\n                    props.submit();\n                    }}>\n                <Input\n                type={'email'}\n                placeholder={'Email'}\n                onChange={props.setEmail} //e => setEmail(e.target.value)\n                value={props.email}\n                name={'email'}\n                error={props.validEmail} //validEmail ? false : true\n                errorText={props.errorEmail}\n                size={'default'}\n                extraClass=\"ml-1 mt-8 mb-8\"\n                ref={props.emailRef}/>\n                <div className=\"submitButton\">\n                    <Button htmlType=\"submit\" type=\"primary\" size=\"medium\">Восстановить</Button>\n                </div>\n            </form>\n            <div className=\"options\">\n                <p className=\"subForLink text text_type_main-small\">Вспомнили пароль?</p>\n                <Link to='/login' className=\"link text text_type_main-small\" onClick={props.statusLogIn}>Войти</Link>\n            </div>\n        </div>\n    )\n    \n}\n\nfunction ForgotPasswordPage() {\n\n    const [email, setEmail] = useState('')\n    const [validEmail, setValidEmail] = useState(true)\n    const emailRef = useRef<HTMLInputElement>(null)\n    const [errorEmail, setErrorEmail] = useState('')\n    const navigate = useNavigate();\n    const dispatch = useDispatch<AppDispatch>()\n\n\n    useEffect(() => {\n        if (emailRef.current && emailRef.current.validity.valid) {\n            setValidEmail(true);\n            setErrorEmail('')\n        } else {\n            setValidEmail(false);\n            setErrorEmail('Неверный формат электронной почты')\n        }\n    }, [email])\n\n    const handleSubmit = async () => {\n        const bodyData = { \n            email: email.toLowerCase(),\n        }\n        try {\n            await dispatch(forgotPassword(bodyData)).unwrap()\n            navigate('/password-reset/reset')\n        } catch (error) {\n            console.error(\"Error:\", error)\n        }\n    }\n\n    return (\n        <ForgotPassword \n        setEmail={e => setEmail(e.target.value)}\n        email={email}\n        validEmail={validEmail ? false : true}\n        errorEmail={errorEmail}\n        emailRef={emailRef}\n        statusLogIn={() => navigate(\"/login\")}\n        submit={() => handleSubmit()}/>\n    )\n}\n\nexport default ForgotPasswordPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}